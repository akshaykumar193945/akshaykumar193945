<!DOCTYPE html>
<html>

<head>
    <title>School Admission</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <header>
        <h1>SSVM PUBLIC SCHOOL</h1>        
        <nav>
            <ul>
                <a href="{{ url_for('layout') }}">Home</a>
                <a id="load-course" href="javascript:void(0)" onclick="goToCourse()">Course</a>
                <a id="load-user-credential" href="{{ url_for('user_records') }}">User Records</a>
				<a id="load-enrolled-cources" href="{{ url_for('show_enrolled_course') }}" onclick="showEnrolledCourse(event)">Enroll</a>
                <a id="load-about" href="javascript:void(0)">About</a>
                <a id="load-service" href="javascript:void(0)">Service</a>
                <a id="load-contact" href="javascript:void(0)">Contact</a>
                <a id="user-profile" href="#"></a>
                <a id="login-link" href="{{ url_for('login') }}">Login</a>
                <a id="signup-link" href="javascript:void(0)" onclick="signUp(event)">Signup</a>
                <a id="logout-link" href="javascript:void(0)" onclick="confirmLogout()">Logout</a>
            </ul>
        </nav>
    </header>

    {% block content %}
    
    <div id="content"></div>

    {% endblock %}
    
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="{{ url_for('static', filename='images.jpg') }}" alt="Company Logo">
            </div>
            <div class="footer-info">
                <p>&copy; 2023 Your Company Name</p>
                <p>Contact us: contact@yourcompany.com</p>
            </div>
            <div class="footer-contact-us">
                <p class="footer-p"> New Delhi  </p>
                <p class="footer-p"> Canaught Place </p>
                <p class="footer-p"> Phone : 471415836 </p>
                <p class="footer-p"> Email : dfvj@gmail.com </p>
            </div>
            <div class="footer-social">
                <a class="footer-links" href="#"><i class="fa fa-facebook"></i></a>
                <a class="footer-links" href="#"><i class="fa fa-twitter"></i></a>
                <a class="footer-links" href="#"><i class="fa fa-linkedin"></i></a>
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('home_content')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(data => {
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error fetching content:', error);
                    // Redirect to the error page
                    window.location.href = '/error';
                });
                        
        });        
    </script>
    
    <script>
        function loadHomeContent() {
            // Use AJAX to fetch the "home_content" page content
            fetch('/home_content')
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "home_content" content:', error);
                });
        }
    </script>
    <script>
        // Set the timeout duration (in milliseconds)
        const inactivityTimeout = 600000; // 5 minutes
      
        let logoutTimer;
      
        function resetLogoutTimer() {
          clearTimeout(logoutTimer);
          logoutTimer = setTimeout(logoutDueToInactivity, inactivityTimeout);
        }
      
        function logoutDueToInactivity() {
          // Redirect to the logout URL
          window.location.href = '/logout';
        }
      
        // Add event listeners to reset the timer on user activity
        document.addEventListener('mousemove', resetLogoutTimer);
        document.addEventListener('keypress', resetLogoutTimer);
      
        // Initial setup
        resetLogoutTimer();
      </script>
      
    <script>function validateForm() {
        var nameInput = document.getElementById("name");
        var nameError = document.getElementById("nameError");
        var name = nameInput.value.trim();
        var namePattern = /^[A-Za-z\s\-']+$/;
    
        var emailInput = document.getElementById("email");
        var emailError = document.getElementById("emailError");
        var email = emailInput.value.trim();
        var emailPattern = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;
    
        var dobInput = document.getElementById("dob");
        var dobError = document.getElementById("dobError");
        var dob = dobInput.value.trim();
        // You can add date of birth validation here
    
        if (!namePattern.test(name)) {
            nameError.textContent = "Please enter a valid name.";
            return false;
        } else if (!emailPattern.test(email)) {
            emailError.textContent = "Please enter a valid email."
            return false;
        }
        
        else {
            nameError.textContent = "";
        }
    
        // Add similar validation for email and date of birth fields
    
        return true; // Allow form submission if all fields are valid
    }</script>

<script>
    // JavaScript to load "signup-link" section using AJAX
    // document.getElementById('signup-link').addEventListener('click', function(e) {
    function signUp(event){
        event.preventDefault(); // Prevent the default link behavior
        // Use AJAX to fetch the "signup" section content
		console.log("in signup in signup;");
        fetch('/signup')
            .then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "signup" content:', error);
            });
    };
</script>

<script>
    // JavaScript to load "login-link" section using AJAX
    document.getElementById('login-link').addEventListener('click', function(e) {
        e.preventDefault(); // Prevent the default link behavior
        console.log("In Login Part !!!!")
        // Use AJAX to fetch the "login" section content
        fetch('/login')
            .then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div                
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {                
                console.error('Error loading "find" content:', error);
            });
    });
</script>

    <script>
        // JavaScript to load "About" section using AJAX
        document.getElementById('load-about').addEventListener('click', function(e) {
            e.preventDefault(); // Prevent the default link behavior
            // Use AJAX to fetch the "About" section content
            fetch('/about')
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "About" content:', error);
                });
        });
    </script>

    <script>
        // JavaScript to load "service" section using AJAX
        document.getElementById('load-service').addEventListener('click', function(e) {
            e.preventDefault(); // Prevent the default link behavior
            // Use AJAX to fetch the "About" section content
            fetch('/service')
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "service" content:', error);
                });
        });
    </script>

    <script>
        // JavaScript to load "contact" section using AJAX
        document.getElementById('load-contact').addEventListener('click', function(e) {
            e.preventDefault(); // Prevent the default link behavior
            // Use AJAX to fetch the "About" section content
            fetch('/contact')
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "contact" content:', error);
                });
        });
    </script>

<script>
    // JavaScript to load "register" section using AJAX
    document.getElementById('user-profile').addEventListener('click', function(e) {
        e.preventDefault(); // Prevent the default link behavior
        // Use AJAX to fetch the "About" section content
        fetch('/user_profile')
            .then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "find" content:', error);
            });
    });
</script>

<script>
    // JavaScript to load "user_credential" section using AJAX
    document.getElementById('load-user-credential').addEventListener('click', function(e) {
        e.preventDefault(); // Prevent the default link behavior
        // Use AJAX to fetch the "About" section content
        fetch('/user_records')
            .then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
				console.log("in user_records");
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "find" content:', error);
            });
    });
</script>

<script>
    function logIn(event){
        event.preventDefault(); // Prevent the default form submission
		console.log("in login-form iiiiiiiiiiiiiiin login-form");
        // Get form data
        const formData = new FormData(event.target);
		console.log("in login-form iin login-form");
        // Send login request using Fetch API
        fetch('{{ url_for('login') }}', {
            method: 'POST',
            body: formData,
        }).then(response =>response.json())
            .then(data => {
				if (data.status === 'success') {
            // Redirect or handle success as needed
					window.location.href = data.redirect;
				} else {
                    // Handle login failure
                    console.error(data.message);
					alert('Invalid credentials. Please check your username and password or sign in for new account.');
                    // Fetch and render the signup template in the content area
                    signUp(event);
                }
            })
        .catch(error => {
            console.error('Error during login:', error);
        });
    };
</script>

<script>
	function showEnrolledCourse(event){
		event.preventDefault();
		
		fetch('/show_enrolled_course').then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
				console.log("in cources !!!!!!!!");
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "find" content:', error);
            });
	}
</script>


<!-- Move this script block to the head or before any other script that uses these functions -->
<script>
    // Combine the two checkLoginStatus functions into one
    function checkLoginStatus() {
        var load_user_tab = document.getElementById('load-user-credential');
		var load_enroll_tab = document.getElementById('load-enrolled-cources');
        var loginLink = document.getElementById('login-link');
        var logoutLink = document.getElementById('logout-link');
        var signupLink = document.getElementById('signup-link');
        var username = document.getElementById('user-profile');

        fetch('/check_login_status')
            .then(response => response.json())
            .then(data => {
                if (data.authenticated) {
                    load_user_tab.innerHTML = 'User Records';
					load_enroll_tab.innerHTML = 'Enroll';
                    loginLink.innerHTML = '';
                    signupLink.innerHTML = '';
                    logoutLink.innerHTML = 'Logout';
                    username.innerHTML = data.username;
                } else {
                    load_user_tab.innerHTML = '';
					load_enroll_tab.innerHTML = '';
                    loginLink.innerHTML = 'Login';
                    signupLink.innerHTML = 'Signup';
                    logoutLink.innerHTML = '';
                    username.innerHTML = '';
                }
            })
            .catch(error => {
                console.error('Error checking login status:', error);
            });
    }

    // Call the function when the page loads
    document.addEventListener('DOMContentLoaded', checkLoginStatus);
</script>

<script>
    function confirmLogout() {
        if (confirm("Are you sure you want to logout?")) {
            // Redirect to the logout URL
            window.location.href = "{{ url_for('logout') }}";
        }
    }
</script>

<script>
function loadLoginPage() {
    fetch('/login')
        .then(response => response.text())  // Parse the response as text
        .then(data => {
            // Update the content area with the fetched login form
            document.getElementById('content').innerHTML = data;
        })
        .catch(error => {
            console.error('Error fetching login form: ', error);
        });
}
</script>

<script>
    function loadSignedIn() {
        event.preventDefault();
        // Get the form data
        const formData = new FormData(document.querySelector('.signup-form'));
		
        // Create an object from the form data
        const formDataObject = {};
        formData.forEach((value, key) => {
            formDataObject[key] = value;
        });

        // Convert the object to a JSON string
        const jsonData = JSON.stringify(formDataObject);
		console.log("in submiting signup form");
        // Make a POST request to the /logged_in endpoint with the form data
        fetch('/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: jsonData,
        })
            .then(response => response.json())
            .then(data => {
                console.log(`Record: ${JSON.stringify(data)}`);
                if (data.status) {
                    console.log(data.message);
                    loadLoginLink();
                } else {
                    console.log(`${JSON.stringify(data.message)}`);
                    alert(`${JSON.stringify(data.message)}`);
                    alert('Redirecting to Login')
                    loadLoginLink();
                }
            }).catch(error => {
			console.log("in error in error in error");
                console.error('Error fetching login form: ', error);
            });
    }

    // Function to load the login-link content
    function loadLoginLink() {
        fetch('/login')  // Assuming 'login' is the route to fetch login-link content
            .then(response => response.text())
            .then(data => {
                // Update the login-link area with the fetched login-link content
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error fetching login-link content: ', error);
            });
    }
</script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    function performTableSearch() {
        var searchTerm = document.getElementById('tableSearchInput').value.toLowerCase();
        var tableRows = document.querySelectorAll('.admission-table tbody tr');
        console.log("In Table searches admission-table ")

        tableRows.forEach(function (row) {
            var rowText = row.textContent.toLowerCase();
            var isVisible = rowText.includes(searchTerm);
            row.style.display = isVisible ? 'table-row' : 'none';
        });
    }
</script>

<script>
    function deleteRecord(recordId) {
    if (confirm('Are you sure you want to delete this record?')) {
        fetch(`/delete_record/${recordId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            if (response.ok) {
                return response.json();
            } else {
                throw new Error('Failed to delete record');
            }
        })
        .then(data => {
            // Handle successful deletion, e.g., update UI or show a message
            console.log(data.message);
            if (data.deleted_record) {
                document.getElementById('content').innerHTML = `Deleted Record: ${JSON.stringify(data.deleted_record)}`;
            } else {
                // Handle the case where no deleted record information is returned
                console.log('No deleted record information provided');
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
}
</script>

<script>
    function deleteUserRecord(recordId) {
    if (confirm('Are you sure you want to delete this record?')) {
        fetch(`/delete_user_record/${recordId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            if (response.ok) {
                return response.json();
            } else {
                throw new Error('Failed to delete record');
            }
        })
        .then(data => {
            // Handle successful deletion, e.g., update UI or show a message
            console.log(data.message);
            if (data.deleted_record) {
                document.getElementById('content').innerHTML = `Deleted Record: ${JSON.stringify(data.deleted_record)}`;
            } else {
                // Handle the case where no deleted record information is returned
                console.log('No deleted record information provided');
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
}
</script>

<script>
    function deleteUserOrder(recordId) {
    if (confirm('Are you sure you want to delete this order?')) {
        fetch(`/delete_user_order/${recordId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            if (response.ok) {
                return response.json();
            } else {
                throw new Error('Failed to delete record');
            }
        })
        .then(data => {
            // Handle successful deletion, e.g., update UI or show a message
            console.log(data.message);
            if (data.deleted_record) {
                document.getElementById('content').innerHTML = `Deleted Order: ${JSON.stringify(data.deleted_record)}`;
            } else {
                // Handle the case where no deleted record information is returned
                console.log('No deleted record information provided');
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
}
</script>


<script>
    function updateRecord(recordId) {
        if (confirm('Are you sure you want to update this record?')) {
            fetch(`/update_record/${recordId}`)
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
					console.log("in edit user record ");
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "find" content:', error);
                });
        }
    };
</script>

<script>
    function updateUserRecord(recordId) {
        if (confirm('Are you sure you want to update this record?')) {
            fetch(`/update_user_record/${recordId}`)
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
					console.log("in edit user record ");
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "find" content:', error);
                });
        }
    };
</script>

<script>
    function updateUserOrder(recordId){
        if (confirm('Are you sure you want to update this record?')) {
            fetch(`/edit_user_order/${recordId}`)
                .then(response => response.text())
                .then(data => {
                    // Insert the fetched content into the 'content' div
					console.log("in edit user record ");
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading "find" content:', error);
                });
        }
    };
</script>

<script>
    // record edited
    function submitRegistrationForm(recordId) {
    // Collect form data or create your data object
    if (validateForm()){
        var formData = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            dob: document.getElementById('dob').value
            // Add more fields as needed
        };
        event.preventDefault();
        if (confirm('Are you sure you want to update this record ??')) {
            console.log('in record edited');
            fetch(`/record_edited/${recordId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData), // Convert data to JSON
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Failed to update record');
                }
            })
            .then(data => {
                console.log(data.message);
                if (data.admission_record) {
                    document.getElementById('content').innerHTML = `Updated Record: ${JSON.stringify(data.admission_record)}`;
                } else {
                    // Handle the case where no deleted record information is returned
                    console.log('No deleted record information provided');
                }
            })
            .catch(error => {
                console.log("in error")
                console.error('Error:', error);
            });
        }}
        return False;
}
</script>

<script>
 function submitUpdateUserData(recordId) {
	event.preventDefault();
    if (validateUserForm()) {
        var formData = {
            first_name: document.getElementById('first_name').value,
            last_name: document.getElementById('last_name').value,
            email: document.getElementById('email').value,
            password: document.getElementById('password').value,
            mobile_number: document.getElementById('mobile_number').value,
        };
        if (confirm('Are you sure you want to update this record ??')) {
            event.preventDefault();
            console.log('in record user edited');
            fetch(`/record_user_edited/${recordId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json', // Set the Content-Type header
                },
                body: JSON.stringify(formData),
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Failed to update record');
                }
            })
            .then(data => {
                console.log(data.message);
                if (data.user_record) {
                    document.getElementById('content').innerHTML = `Updated User Record: ${JSON.stringify(data.user_record)}`;
                } else {
                    console.log('No updated record information provided');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    }
    return false;
}

function validateUserForm(){
    // add your form validation here
return true;
}
</script>


<!--  -->
<script>
    function submitUpdateUserOrder(recordId) {
       event.preventDefault();
       if (validateUserForm()) {
           var formData = {
               course: document.getElementById('course').value,
               course_id: document.getElementById('course_id').value,
           };
           if (confirm('Are you sure you want to update this record ??')) {
               event.preventDefault();
               console.log('in edit user order');
               fetch(`/submit_edit_order/${recordId}`, {
                   method: 'POST',
                   headers: {
                       'Content-Type': 'application/json', // Set the Content-Type header
                   },
                   body: JSON.stringify(formData),
               })
               .then(response => {
                   if (response.ok) {
                       return response.json();
                   } else {
                       throw new Error('Failed to update order');
                   }
               })
               .then(data => {
                   console.log(data.message);
                   if (data.user_order) {
                       document.getElementById('content').innerHTML = `Updated User order: ${JSON.stringify(data.user_order)}`;
                   } else {
                       console.log('No updated order information provided');
                   }
               })
               .catch(error => {
                   console.error('Error:', error);
               });
           }
       }
       return false;
   }
   
   function validateUserForm(){
       // add your form validation here
   return true;
   }
   </script>


<script>
    function downloadExcel() {
        if (confirm('Are you sure you want to download Excel?')) {
            fetch('/process_form', {
                method: 'POST',
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.text();
            })
            .then(data => {
                location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    }
</script>

<script>
    function goToCourse(){
        console.log("i am in course page ")
        fetch('/courses')
            .then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "find" content:', error);
            });
    };
</script>

<script>
    function forgetPassword(){

        fetch('/forgot_password').then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "find" content:', error);
            });
    };
</script>

<script>
    function submitPwdRecoveryForm() {
        var username = document.getElementById('username').value;
        console.log("inside password recovery : ", username, " ::::: ");
        fetch(`/update_password_1/${username}`)
            .then(response => response.text())
            .then(data => {
                // Insert the fetched content into the 'content' div
                document.getElementById('content').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading "update_password" content:', error);
                });
    };
  </script>

<script>
    function submitUpdatedPwd(username){
        event.preventDefault();
        // "Iterate over the form data of class='new-pwd-form' "
        const formData = new FormData(document.querySelector('.new-pwd-form'));
        const formDataObject = {};
        formData.forEach((value, key) => {
            formDataObject[key] = value;
        });

        fetch(`/password_updated/${username}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(formDataObject),
        })
            .then(response => response.json())
                .then(data => {
				if (data.status === 'success') {
                    document.getElementById('content').innerHTML =`Password Updated: ${JSON.stringify(data.user_password)}`;
                    setTimeout(() => {
                        window.location.href = "{{ url_for('layout') }}";  // Replace with your desired URL
                    }, 5000);  // 5000 milliseconds (5 seconds)
                    } else {
                    console.log('Eroroororro');
            }})
            .catch(error => {
                console.error('Error loading "update_password" content:', error);
                });
    };
</script>

<script>
    // JavaScript to check login status and load "enroll Course" section using AJAX
    function enrollCourse(event, course, course_id) {
    event.preventDefault(); // Prevent the default link behavior
    //console.log("In enroll courses !!!!!!!!!!!!!!!!!!!!!!! ");

    // Use fetch to check login status
    fetch('/check_login_status')
        .then(response => response.json())
        .then(data => {
            // Check if the user is authenticated
            console.log("In enroll courses !!! ");
            if (data.authenticated) {
                // If authenticated, proceed to fetch and load course content
                fetch(`/enroll_Course`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ course_name : course, course_id : course_id }), // Include the selected course data
                })
                .then(response => response.text())
                .then(courseData => {
                    // Insert the fetched content into the 'content' div
                    document.getElementById('content').innerHTML = courseData;
                })
                .catch(courseError => {
                    console.error('Error loading "enroll Course" content:', courseError);
                });
            } else {
                // If not authenticated, redirect to the login page
                console.log("in errrorororororoo");
				alert("Please login to Enroll in your cources ");
                document.getElementById('content').innerHTML = loadLoginPage()
            }
        })
        .catch(error => {
            console.error('Error checking login status:', error);
        });
};

</script>

</body>

</html>